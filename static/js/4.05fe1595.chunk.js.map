{"version":3,"sources":["components/socket-tab-items/socketTabItems.js","pages/main-page/index.js"],"names":["SocketTabItem","props","startSocket","url","state","socketUrl","socket","close","setState","message","io","transports","on","a","status","connectError","this","data","console","log","error","connectEvent","event","saveSocket","sendEvError","map","item","name","isJson","val","push","text","DataReturn","eventName","is_JSON","type","scrollDown","str","Function","e","addEvent","connected","length","values","find","datares","alert","newevent","handler","target","value","removeItem","index","findIndex","splice","Url","update","sendMesssage","is_active","sendEvent","messageText","emit","clearAll","changeEventStatus","checked","closeSocket","setTimeout","document","getElementById","scrollIntoView","socketName","show","id","className","htmlFor","placeholder","onChange","onClick","autoComplete","rows","key","defaultChecked","src","collapsed","role","JSON","stringify","Component","connect","global","Global","Dashboard","DataVal","active","removeTab","activeItem","activeTab","currentTab","addNewTab","Math","random","updateData","lenght","title"],"mappings":"mUAOMA,G,mBACJ,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KAkBRC,YAAc,SAACC,GACVA,IAAQ,EAAKC,MAAMC,WAAsC,KAAzB,EAAKD,MAAMC,YAC5C,EAAKC,OAAOC,QACZ,EAAKC,SAAS,CAAEC,QAAS,MAE3B,EAAKD,SAAS,CAACH,UAAUF,IACzB,EAAKG,OAASI,IAAGP,EAAK,CAACQ,WAAY,CAAC,eACpC,EAAKL,OAAOM,GAAG,UAAf,uCAA0B,WAAOH,GAAP,SAAAI,EAAA,sDACxB,EAAKL,SAAS,CAAEM,QAAQ,EAAMC,cAAa,IADnB,2CAA1B,kCAAAC,KAAA,gBAIA,EAAKV,OAAOM,GAAG,SAAS,SAACK,GAAWC,QAAQC,IAAIF,GAAO,EAAKT,SAAS,CAAEY,MAAOH,EAAMH,QAAQ,OAC5F,EAAKR,OAAOM,GAAG,cAAc,SAACK,GAAUC,QAAQC,IAAIF,GAAO,EAAKT,SAAS,CAAEY,MAAOH,EAAMH,QAAQ,OAChG,EAAKR,OAAOM,GAAG,iBAAiB,SAACK,GAAUC,QAAQC,IAAIF,GAAO,EAAKT,SAAS,CAAEY,MAAOH,EAAMH,QAAQ,OACnG,EAAKO,aAAa,EAAKjB,MAAMa,KAAKK,OAGlC,EAAKC,cApCY,EAuCnBF,aAAa,SAACJ,GACZ,EAAKT,SAAS,CAACgB,aAAY,IAC3BP,EAAKQ,KAAI,SAAAC,GACP,OAAmB,IAAhBA,EAAKZ,QACA,EAAKR,OAAOM,GAAGc,EAAKC,KAApB,uCAA0B,WAAOV,GAAP,iBAAAJ,EAAA,sDAC5Be,EAAS,EAAKA,OAAOX,IACrBY,EAAM,EAAKzB,MAAMK,SACjBqB,KAAK,CAACC,KAAKH,EAAQ,EAAKI,WAAWf,GAAMA,EAAMgB,UAAUP,EAAKC,KAAMO,QAAQN,EAAQO,KAAK,aAC7F,EAAK3B,SAAS,CAACC,QAAQoB,IACvB,EAAKO,aAL2B,2CAA1B,kCAAApB,KAAA,oBA3CO,EA+DnBY,OAAO,SAACS,GACN,IACE,MAAmB,kBAATA,GAIiB,kBADZ,IAAIC,SAAS,WAAaD,EAAK,KAA/B,GAEf,MAAOE,GACP,OAAO,IAvEQ,EA2EnBC,SAAW,SAACd,GAGV,GAFA,EAAKlB,SAAS,CAACC,QAAQ,OACL,EAAKH,SAAS,EAAKA,OAAOmC,WAAa,EAAKrC,MAAMU,QAAwC,IAA9B,EAAKV,MAAMK,QAAQiC,QAEjG,CACE,EAAKlC,SAAS,CAACO,cAAa,IAC5B,IAAI4B,EAAS,EAAKvC,MAAMa,KACxB,GAAG0B,EAAOrB,MAAMsB,MAAK,SAAAC,GAAO,OAAGA,EAAQlB,OAASD,KAC/C,OAAOoB,MAAM,4BAEdH,EAAOrB,MAAMQ,KAAK,CAAEH,KAAMD,EAAMZ,QAAQ,IACxC,EAAKN,SAAS,CAAES,KAAM0B,EAAQI,SAAU,KACxC,EAAK1B,aAAasB,EAAOrB,YASzB,EAAKd,SAAS,CAACO,cAAa,KAhGb,EAoGnBiC,QAAU,SAACT,GAAD,OAAO,EAAK/B,SAAL,eAAiB+B,EAAEU,OAAOtB,KAAOY,EAAEU,OAAOC,SApGxC,EAqGnBC,WAAa,SAACzB,GACZ,IAAIiB,EAAS,EAAKvC,MAAMa,KACpBmC,EAAQT,EAAOrB,MAAM+B,WAAU,SAAAxB,GAAG,OAAIA,EAAIF,OAASD,EAAKC,QAC5DgB,EAAOrB,MAAMgC,OAAOF,EAAO,GAC3B,EAAK5C,SAAS,CAAES,KAAM0B,EAAQlC,QAAQ,KACtC,EAAKH,OAAOC,QACZ,EAAKL,YAAY,EAAKE,MAAMmD,MA3GX,EA8GnBhC,WAAa,WACX,IAAIN,EAAO,EAAKb,MAAMa,KACtBA,EAAKd,IAAM,EAAKC,MAAMmD,IACtB,EAAKtD,MAAMuD,OAAOvC,IAjHD,EAqHnBwC,aAAa,WACX,IAAMC,IAAY,EAAKpD,SAAS,EAAKA,OAAOmC,WAAa,EAAKrC,MAAMU,QAAwC,IAA9B,EAAKV,MAAMK,QAAQiC,QACjG,GAAG,EAAKtC,MAAMuD,WAAwC,KAA3B,EAAKvD,MAAMwD,aAAsBF,EAC5D,CACE,EAAKlD,SAAS,CAACgB,aAAY,EAAOT,cAAa,IAC/C,EAAKT,OAAOuD,KAAK,EAAKzD,MAAMuD,UAAW,EAAKvD,MAAMwD,aAClD,IAAIhC,EAAS,EAAKA,OAAO,EAAKxB,MAAMwD,aAChC/B,EAAM,EAAKzB,MAAMK,QACrBoB,EAAIC,KAAK,CAACC,KAAKH,EAAQ,EAAKI,WAAW,EAAK5B,MAAMwD,aAAa,EAAKxD,MAAMwD,YAAYD,UAAU,EAAKvD,MAAMuD,UAAWzB,QAAQN,EAAQO,KAAK,WAC3I,EAAK3B,SAAS,CAACC,QAAQoB,IACvB,EAAKO,kBAGLsB,EAAY,EAAKlD,SAAS,CAACgB,aAAY,IAAO,EAAKhB,SAAS,CAACO,cAAa,KAlI3D,EAsInB+C,SAAS,WACP,EAAKtD,SAAS,CAACmD,UAAU,GAAIC,YAAY,GAAIpC,aAAY,KAvIxC,EA0InBuC,kBAAkB,SAACrC,EAAMG,GACvB,IAAIc,EAAS,EAAKvC,MAAMa,KACpBmC,EAAQT,EAAOrB,MAAM+B,WAAU,SAAAxB,GAAG,OAAIA,EAAIF,OAASD,EAAKC,QAC5DgB,EAAOrB,MAAM8B,GAAOtC,OAASe,EAAIoB,OAAOe,QACxC,EAAKxD,SAAS,CAACS,KAAK0B,EAAQlC,QAAQ,KACpC,EAAKwD,cACL,EAAK/D,YAAY,EAAKE,MAAMmD,MAhJX,EAmJnBnB,WAAW,WACT8B,YAAW,kBAAIC,SAASC,eAAe,UAAUC,gBAAe,KAAO,MApJtD,EAuJnBJ,YAAY,aACQ,EAAK3D,SAAS,EAAKA,OAAOmC,WAAa,EAAKrC,MAAMU,QAAwC,IAA9B,EAAKV,MAAMK,QAAQiC,SAE/F,EAAKpC,OAAOC,QACd,EAAKC,SAAS,CAAEM,QAAQ,EAAQL,QAAQ,MAzJxC,EAAKL,MAAQ,CACXa,KAAM,GAAIH,QAAQ,EAAOiC,SAAU,GAAIQ,IAAK,GAAInC,MAAO,GAAIuC,UAAU,GAAIC,YAAY,GAAInD,QAAQ,GAAKJ,UAAU,GAAImB,aAAY,EAAOT,cAAa,GAEtJ,EAAKT,OAAS,EAAKL,MAAMqE,WALR,E,iFASjBtD,KAAKR,SAAS,CAACS,KAAKD,KAAKf,MAAMgB,KAAMsC,IAAIvC,KAAKf,MAAMgB,KAAKd,Q,uDAG1BF,GAG/B,OAFGA,EAAMsE,OAASvD,KAAKZ,MAAMa,KAAKuD,IAChCxD,KAAKR,SAAS,CAACM,QAAQ,KAClB,I,iCAyCEe,GACT,MAAmB,kBAATA,EACDA,EAEF,IAAIS,SAAS,UAAYT,EAAzB,K,6CAmGPb,KAAKiD,gB,+BAGG,IAAD,SACmGjD,KAAKZ,MAAvGa,EADD,EACCA,KAAMH,EADP,EACOA,OAAQiC,EADf,EACeA,SAAUQ,EADzB,EACyBA,IAAKnC,EAD9B,EAC8BA,MAAOuC,EADrC,EACqCA,UAAWC,EADhD,EACgDA,YAAanD,EAD7D,EAC6DA,QAASe,EADtE,EACsEA,YAAaT,EADnF,EACmFA,aADnF,EAEsBC,KAAKf,MAA1BsE,EAFD,EAECA,KAAMD,EAFP,EAEOA,WACRhD,EAAQL,EAAKK,MAAQL,EAAKK,MAAQ,GAClCoC,IAAY1C,KAAKV,SAASU,KAAKV,OAAOmC,WAAa3B,GAA6B,IAAnBL,EAAQiC,QAC3E,OACE,yBAAK+B,WAAYF,IAAStD,EAAKuD,GAAK,GAAK,UAAY,YACnD,yBAAKC,UAAU,mBACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,OACb,2BAAOC,QAAS,YAAYJ,EAAYG,UAAU,eAClD,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,uBACb,yBAAKA,WAAY1D,EAAa,gBAAgB,IAAI,oBAAqByD,GAAG,iBACxE,uBAAGC,WAAYf,EAAY,eAAiB,aAAe,mBAA3D,uBAIJ,2BAAOc,GAAI,YAAYF,EAAYnC,KAAK,OAAOsC,WAAY1D,EAAa,gBAAgB,IAAI,gBAAiB4D,YAAY,aAAazB,MAAOK,EAAK5B,KAAK,MAAMiD,SAAU5D,KAAKgC,UAC5K,yBAAKyB,UAAU,sBACZf,EAAY,4BAAQe,UAAU,iBAAiBtC,KAAK,SAASqC,GAAG,gBAAgBK,QAAS,kBAAM,EAAKZ,gBAAxF,cAA6H,4BAAQQ,UAAU,kBAAkBtC,KAAK,SAASqC,GAAG,gBAAgBK,QAAS,kBAAM,EAAK3E,YAAYqD,KAArG,eAMlJ,yBAAKkB,UAAgC,cAEnC,yBAAKA,UAAU,yBACb,yBAAKA,UAAU,mCACb,yBAAKA,UAAU,cACb,2BAAOC,QAAS,YAAYJ,GAA5B,gBACA,2BAAOE,GAAI,YAAYF,EAAYG,WAAYjD,EAAY,gBAAgB,IAAK,gBAAiBmD,YAAY,aAAazB,MAAOS,EAAWhC,KAAK,YAAYiD,SAAU5D,KAAKgC,QAAS8B,aAAa,WAEpM,yBAAKL,UAAU,cACb,2BAAOC,QAAS,aAAaJ,GAA7B,WACA,8BAAUE,GAAI,aAAaF,EAAYG,WAAYjD,EAAY,gBAAgB,IAAK,gBAAiBuD,KAAK,IAAIJ,YAAY,UAAUhD,KAAK,cAAcuB,MAAOU,EAAagB,SAAU5D,KAAKgC,UACzLxB,GAAa,yBAAKiD,UAAU,4BAAf,4DAEhB,yBAAKA,UAAU,cACb,yBAAKA,UAAU,2BACb,4BAAQA,UAAU,iCAAiCI,QAAS7D,KAAKyC,cAAjE,iBAEF,yBAAKgB,UAAU,2BACb,4BAAQA,UAAU,2BAA2BI,QAAS7D,KAAK8C,UAA3D,UAEF,yBAAKW,UAAU,cACb,4BAAQA,UAAU,gCAAgCI,QAAS,kBAAI,EAAKrE,SAAS,CAACC,QAAQ,OAAtF,uBAIJ,wBAAIgE,UAAU,SACd,2BAAOC,QAAS,WAAWJ,GAA3B,kBACA,yBAAKG,UAAU,gBACb,2BAAOD,GAAI,WAAWF,EAAYnC,KAAK,OAAOsC,UAAU,eAAevB,MAAOH,EAAUpB,KAAK,WAAWgD,YAAY,aAAaC,SAAU5D,KAAKgC,UAChJ,yBAAKyB,UAAU,sBACb,4BAAQA,UAAU,iBAAiBtC,KAAK,SAAS0C,QAAS,kBAAM,EAAKrC,SAASO,KAA9E,SAGJ,wBAAI0B,UAAU,mBACXnD,EAAMG,KAAI,SAACC,EAAM0B,GAAP,OACT,wBAAIqB,UAAU,wEAAwEO,IAAK5B,GACzF,yBAAKqB,UAAU,kCACb,2BAAOA,UAAU,oBACb,2BAAOtC,KAAK,WAAW8C,eAAgBvD,EAAKZ,OAAQ8D,SAAU,SAACrC,GAAD,OAAK,EAAKwB,kBAAkBrC,EAAMa,MAChG,uBAAGkC,UAAU,kBAAb,SAEH/C,EAAKC,MAER,0BAAM8C,UAAU,iBAAgB,uBAAGA,UAAU,iBAAiBI,QAAS,kBAAM,EAAK1B,WAAWzB,KAA7D,iBAQ1C,yBAAK+C,UAAU,0BACb,yBAAKA,UAAU,gCACb,yBAAKA,UAAU,SACZhE,EAAQgB,KAAI,SAACC,EAAK0B,GACnB,MAAiB,aAAd1B,EAAKS,KACD,yBAAKsC,UAAU,eAAeO,IAAK5B,GACxC,yBAAKqB,UAAU,aACb,8BAAO,OAET,yBAAKA,UAAU,UACZ/C,EAAKQ,QAAU,6BAAK,kBAAC,IAAD,CAAWgD,IAAKxD,EAAKK,KAAMoD,WAAW,KAC3D,6BAAK,8BAAOzD,EAAKK,OACjB,0BAAM0C,UAAU,aAAa/C,EAAKO,WAHpC,MAOO,yBAAKwC,UAAU,eAAeO,IAAK5B,GACxC,yBAAKqB,UAAU,YACV/C,EAAKQ,QAAU,6BAAK,kBAAC,IAAD,CAAWgD,IAAKxD,EAAKK,KAAMoD,WAAW,KAC3D,6BAAK,8BAAOzD,EAAKK,OACjB,0BAAM0C,UAAU,aAAa/C,EAAKiC,WAHtC,KAIE,yBAAKc,UAAU,aACb,8BAAQ,WAKdf,EAAgH,GAApG,yBAAKe,UAAU,qBAAqBW,KAAK,SAASC,KAAKC,UAAUlE,GAAS,oBACxF,yBAAKoD,GAAG,qB,GA5QEe,cA4RbC,mBALf,SAAyBpF,GACvB,MAAO,CACLqF,OAAQrF,EAAMsF,UAGHF,CAAyBxF,GC9RlCiB,G,OAAO,CACT,CAACuD,GAAG,EAAGrE,IAAI,iCAAkCmB,MAAO,CAAC,CAAEK,KAAM,cAAeb,QAAQ,OAMlF6E,E,2MACFvF,MAAQ,CAAEwF,QAAS3E,EAAM4E,OAAQ,I,EAYjCC,UAAY,SAACpE,GACT,IAAIT,EAAO,EAAKb,MAAMwF,QAClBxC,EAAQnC,EAAKoC,WAAU,SAAAxB,GAAG,OAAIA,EAAI2C,KAAO9C,EAAK8C,MAGlD,GAFAvD,EAAKqC,OAAOF,EAAO,GACnB,EAAK5C,SAAS,CAAEoF,QAAS3E,KACoC,IAAzDA,EAAKoC,WAAU,SAAAxB,GAAG,OAAIA,EAAI2C,KAAO,EAAKpE,MAAMyF,UAAgB,CAC5D,IAAIE,EAAa9E,EAAKyB,OAAS,EAAIzB,EAAKmC,EAAQ,GAAGoB,GAAKvD,EAAK,GAAGuD,GAChEN,YAAW,kBAAM,EAAK8B,UAAUD,KAAa,SAE5C,CACD,IAAIE,EAAahF,EAAKA,EAAKoC,WAAU,SAAAxB,GAAG,OAAIA,EAAI2C,KAAO,EAAKpE,MAAMyF,WAASrB,GAC3EN,YAAW,kBAAM,EAAK8B,UAAUC,KAAa,O,EAKrDC,UAAY,WACR,IAAIjF,EAAO,EAAKb,MAAMwF,QAClBpB,EAAK2B,KAAKC,SACdnF,EAAKa,KAAK,CAAE3B,IAAK,GAAImB,MAAO,GAAIkD,GAAIA,IACpC,EAAKhE,SAAS,CAAEoF,QAAS3E,EAAM4E,OAAQrB,K,EAI3C6B,WAAa,SAAC3E,GAEV,IAAIT,EAAO,EAAKb,MAAMwF,QAClBxC,EAAQnC,EAAKoC,WAAU,SAAAxB,GAAG,OAAIA,EAAI2C,KAAO9C,EAAK8C,MAClDvD,EAAKmC,GAAOjD,IAAMuB,EAAKvB,IACvB,EAAKK,SAAS,CAAEoF,QAAS3E,K,EAI7B+E,UAAU,SAACxB,GAAD,OAAO,EAAKhE,SAAS,CAAEqF,OAAQrB,K,mFAzCnCxD,KAAKZ,MAAMwF,QAAQU,OAAS,EAC9BtF,KAAKR,SAAS,CAAEqF,OAAQ7E,KAAKZ,MAAMwF,QAAQ,GAAGpB,KAE9CxD,KAAKkF,c,+BAwCC,IAAD,SACuBlF,KAAKZ,MAAzBwF,EADH,EACGA,QAASC,EADZ,EACYA,OACjB,OACI,yBAAKpB,UAAU,6BACX,yBAAKA,UAAU,iBACX,yBAAKA,UAAU,wCACX,yBAAKA,UAAU,qEACX,wBAAIA,UAAU,mCACTmB,EAAQnE,KAAI,SAACC,EAAM0B,GAAP,OAAiB,wBAAIyB,QAAS,kBAAM,EAAKmB,UAAUtE,EAAK8C,KAAKC,WAAYoB,IAAWnE,EAAK8C,GAAK,SAAW,IAAM,UAAWQ,IAAKtD,EAAK8C,GAAI+B,MAAO7E,EAAKvB,KAAO,cACpK,8BAAOuB,EAAKvB,KAAO,cAClByF,EAAQlD,OAAS,EAAI,uBAAG+B,UAAU,iBAAiBI,QAAS,kBAAM,EAAKiB,UAAUpE,KAA5D,SAA6E,QAG3G,yBAAK+C,UAAU,WACX,uBAAGA,UAAU,sCAAsCI,QAAS7D,KAAKkF,WAAjE,UAIZ,yBAAKzB,UAAU,uBACVmB,EAAQnE,KAAI,SAACC,EAAM0B,GAAP,OACT,kBAAC,EAAD,CAAenC,KAAMS,EAAM6C,KAAMsB,EAAQrC,OAAQ,EAAK6C,WAAYrB,IAAKtD,EAAK8C,GAAIC,UAAU,aAAaH,WAAY,SAAS5C,EAAK8C,e,GApErIe,aAkFTC,uBALf,SAAyBpF,GACrB,MAAO,CACHqF,OAAQrF,EAAMsF,UAGPF,CAAyBG","file":"static/js/4.05fe1595.chunk.js","sourcesContent":["\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport ReactJson from 'react-json-view'\nimport io from 'socket.io-client';\nimport './style.css';\n\nclass SocketTabItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { \n      data: {}, status: false, newevent: '', Url: '', error: '', sendEvent:'', messageText:'', message:[],  socketUrl:'', sendEvError:false, connectError:false\n    };    \n    this.socket = this.props.socketName;\n  }\n\n  componentDidMount() {\n    this.setState({data:this.props.data, Url:this.props.data.url});\n  }\n \n  UNSAFE_componentWillReceiveProps(props){\n    if(props.show !== this.state.data.id)\n      this.setState({status: false})\n    return true\n  }\n\n\n  startSocket = (url) => {\n    if(url !== this.state.socketUrl && this.state.socketUrl !== ''){\n      this.socket.close();\n      this.setState({ message: [] });\n    }\n    this.setState({socketUrl:url});\n    this.socket = io(url, {transports: ['websocket']});\n    this.socket.on('connect', async (message)=> {\n      this.setState({ status: true, connectError:false});\n    });\n\n    this.socket.on('error', (data) => { console.log(data); this.setState({ error: data, status: false }) });\n    this.socket.on('desconnect', (data) => {console.log(data); this.setState({ error: data, status: false }) });\n    this.socket.on('connect_error', (data) => {console.log(data); this.setState({ error: data, status: false }) });\n    this.connectEvent(this.state.data.event)\n\n    //change tab name\n    this.saveSocket()\n  }\n\n  connectEvent=(data)=>{\n    this.setState({sendEvError:false});\n    data.map(item=>{\n      if(item.status === true)\n      {return this.socket.on(item.name, async (data) =>{ \n        let isJson = this.isJson(data);\n        let val = this.state.message;\n        val.push({text:isJson? this.DataReturn(data):data, eventName:item.name, is_JSON:isJson, type:'receiver'})\n        this.setState({message:val})\n        this.scrollDown()\n      });\n      }\n      else return true;\n    })\n  }\n\n  // this.DataReturn(data)\n  DataReturn(val) {\n    if(typeof(val) === 'object'){\n      return val\n    }\n    return new Function(\"return \" + val)();\n  };\n\n  isJson=(str)=>{\n    try { \n      if(typeof(str) === 'object'){\n        return true\n      }\n      let dataval = (new Function(\"return [\" + str+ \"];\")())\n      return typeof(dataval) === 'object' ? true: false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  addEvent = (item) => {\n    this.setState({message:[]})\n    const is_active = this.socket ? this.socket.connected || this.state.status || this.state.message.length !== 0 : false;\n    if(is_active)\n    {\n      this.setState({connectError:false})\n      let values = this.state.data;\n      if(values.event.find(datares=> datares.name === item))\n      {return alert('event name already added')}\n\n      values.event.push({ name: item, status: true })\n      this.setState({ data: values, newevent: '' })\n      this.connectEvent(values.event)\n      // this.socket.on(item, async (data) =>{ \n      //   console.log('add event connect',data)\n      //   let val = this.state.message;\n      //   val.push({text:data, eventName:item, sendEvent:this.state.sendEvent})\n      //   this.setState({message:val})\n      // });\n    }\n    else{\n      this.setState({connectError:true})\n    }\n  }\n\n  handler = (e) => this.setState({ [e.target.name]: e.target.value });\n  removeItem = (item) => {\n    let values = this.state.data;\n    let index = values.event.findIndex(val => val.name === item.name)\n    values.event.splice(index, 1)\n    this.setState({ data: values, message:[]})\n    this.socket.close();\n    this.startSocket(this.state.Url);\n  }\n\n  saveSocket = () => {\n    let data = this.state.data;\n    data.url = this.state.Url;\n    this.props.update(data);\n  }\n\n  // Send message\n  sendMesssage=()=>{\n    const is_active = this.socket ? this.socket.connected || this.state.status || this.state.message.length !== 0 : false;\n    if(this.state.sendEvent && this.state.messageText !== '' && is_active)\n    {\n      this.setState({sendEvError:false, connectError:false})\n      this.socket.emit(this.state.sendEvent, this.state.messageText);\n      let isJson = this.isJson(this.state.messageText)\n      let val = this.state.message;\n      val.push({text:isJson? this.DataReturn(this.state.messageText):this.state.messageText,sendEvent:this.state.sendEvent, is_JSON:isJson, type:'sender'})\n      this.setState({message:val})\n      this.scrollDown()\n    }\n    else {\n      is_active ? this.setState({sendEvError:true}):this.setState({connectError:true})\n    }\n  }\n\n  clearAll=()=>{\n    this.setState({sendEvent:'', messageText:'', sendEvError:false})\n  }\n\n  changeEventStatus=(item, val)=>{\n    let values = this.state.data;\n    let index = values.event.findIndex(val => val.name === item.name)\n    values.event[index].status = val.target.checked;\n    this.setState({data:values, message:[]})\n    this.closeSocket()\n    this.startSocket(this.state.Url);\n  }\n\n  scrollDown=()=>{\n    setTimeout(()=>document.getElementById(\"scroll\").scrollIntoView(false),100)\n  }\n\n  closeSocket=()=>{\n    const is_active = this.socket ? this.socket.connected || this.state.status || this.state.message.length !== 0 : false;\n    if(is_active)\n      this.socket.close();\n    this.setState({ status: false,  message:[]});\n  }\n\n  componentWillUnmount(){\n    this.closeSocket()\n  }\n\n  render() {\n    const { data, status, newevent, Url, error, sendEvent, messageText, message, sendEvError, connectError} = this.state;\n    const { show, socketName } = this.props;\n    const event = data.event ? data.event : [];\n    const is_active = this.socket ? this.socket.connected || status || message.length !== 0 : false;\n    return (\n      <div className={(show === data.id ? '' : 'd-none') + \" tabitem\"}>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"col\">\n              <label htmlFor={\"socketurl\"+socketName} className=\"m-0 d-none\"></label>\n              <div className=\"input-group mb-1\">\n                <div className=\"input-group-prepend\">\n                  <div className={(connectError?\"border-danger\":'')+\" input-group-text\"} id=\"btnGroupAddon\">\n                    <i className={(is_active ? 'text-success' : 'text-gray') + \" material-icons\"}>signal_wifi_4_bar</i>\n                    {/* <!-- sync_alt --> */}\n                  </div>\n                </div>\n                <input id={\"socketurl\"+socketName} type=\"text\" className={(connectError?\"border-danger\":'')+\" form-control\"} placeholder=\"Socket Url\" value={Url} name=\"Url\" onChange={this.handler} />\n                <div className=\"input-group-append\">\n                  {is_active ? <button className=\"btn btn-silver\" type=\"button\" id=\"button-addon2\" onClick={() => this.closeSocket()}>Disconnect</button> : <button className=\"btn btn-primary\" type=\"button\" id=\"button-addon2\" onClick={() => this.startSocket(Url)}>Connect</button>}\n                  {/* <button className=\"btn btn-primary\" type=\"button\" id=\"button-addon2\" onClick={() => this.saveSocket(data)}>Save</button> */}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className={(status ? '' : '') + \" row mx-n1\"}>\n            {/*d-none <!-- Left side --> */}\n            <div className=\"col-sm-4 col-md-3 p-1\">\n              <div className=\"p-2 bg-light leftside shadow-sm\">\n                <div className=\"form-group\">\n                  <label htmlFor={\"senedvent\"+socketName}>Send Message</label>\n                  <input id={\"senedvent\"+socketName} className={(sendEvError?\"border-danger\":\"\") +\" form-control\"} placeholder=\"Event Name\" value={sendEvent} name=\"sendEvent\" onChange={this.handler} autoComplete=\"false\"/>                  \n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor={\"messagetxt\"+socketName}>Message</label>\n                  <textarea id={\"messagetxt\"+socketName} className={(sendEvError?\"border-danger\":\"\") +\" form-control\"} rows=\"5\" placeholder=\"Message\" name=\"messageText\" value={messageText} onChange={this.handler}></textarea>\n                  {sendEvError&&<div className=\"invalid-feedback d-block\">Please enter valid value in send event or message field</div>}\n                </div>\n                <div className=\"row mx-n1 \">\n                  <div className=\"col-8 col-sm-7 mb-1 p-1\">\n                    <button className=\"btn btn-primary btn-block px-1\" onClick={this.sendMesssage}>Send Message</button>\n                  </div>\n                  <div className=\"col-4 col-sm-5 mb-1 p-1\">\n                    <button className=\"btn btn-danger btn-block\" onClick={this.clearAll}>Clear</button>\n                  </div>\n                  <div className=\"col-12 p-1\">\n                    <button className=\"btn btn-white text-danger p-0\" onClick={()=>this.setState({message:[]})}>Clear all message</button>\n                  </div>\n                </div>\n\n                <hr className=\"my-1\"/>\n                <label htmlFor={\"recevent\"+socketName}>Receiver Event</label>\n                <div className=\"input-group \">\n                  <input id={\"recevent\"+socketName} type=\"text\" className=\"form-control\" value={newevent} name=\"newevent\" placeholder=\"Event Name\" onChange={this.handler} />\n                  <div className=\"input-group-append\">\n                    <button className=\"btn btn-silver\" type=\"button\" onClick={() => this.addEvent(newevent)}>Add</button>\n                  </div>\n                </div>\n                <ul className=\"list-group mt-2\">\n                  {event.map((item, index) =>\n                    <li className=\"list-group-item d-flex justify-content-between align-items-center p-2\" key={index}>\n                      <div className=\"d-flex justify-content-between\">\n                        <label className=\"m-0 checkboxItem\">\n                            <input type=\"checkbox\" defaultChecked={item.status} onChange={(e)=>this.changeEventStatus(item, e)}/>\n                            <i className=\"material-icons\">stop</i>\n                        </label>\n                        {item.name}\n                      </div>\n                      <span className=\"d-flex cursor\"><i className=\"material-icons\" onClick={() => this.removeItem(item)}>clear</i></span>\n                    </li>\n                  )}\n                </ul>\n              </div>\n            </div>\n\n            {/* <!-- Right side --> */}\n            <div className=\"col-sm-8 col-md-9 p-1 \">\n              <div className=\"p-2 bg-light shadow-sm h-100\">\n                <div className=\"mesgs\">\n                  {message.map((item,index)=>{\n                  if(item.type === \"receiver\"){\n                  return <div className=\"incoming_msg\" key={index}>\n                    <div className=\"userImage\">\n                      <span>{'RE'}</span>\n                    </div>\n                    <div className=\"msgbox\">\n                      {item.is_JSON ? <pre><ReactJson src={item.text} collapsed={true} /></pre>:\n                      <pre><code>{item.text}</code></pre>}\n                      <span className=\"info_data\">{item.eventName}</span> </div>\n                  </div>\n                  }\n                  else{\n                    return <div className=\"outgoing_msg\" key={index}>\n                      <div className=\"sent_msg\">\n                          {item.is_JSON ? <pre><ReactJson src={item.text} collapsed={true} /></pre>:\n                          <pre><code>{item.text}</code></pre>}\n                          <span className=\"info_data\">{item.sendEvent}</span> </div>\n                        <div className=\"userImage\">\n                          <span >{'SE'}</span>\n                        </div>\n                    </div>\n                  }\n                  })}\n                  {!is_active ? <pre className=\"alert alert-danger\" role=\"alert\">{JSON.stringify(error || \"Call Socket Url\")}</pre>:''}\n                  <div id=\"scroll\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    global: state.Global,\n  };\n}\nexport default connect(mapStateToProps)(SocketTabItem);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport SocketTabItem from '../../components/socket-tab-items/socketTabItems'\nimport './style.css';\n\nconst data = [\n    {id:0, url:'https://socket-io-chat.now.sh/', event: [{ name: 'new message', status: true }]},\n    //{id:0, url:'http://10.10.30.110:4000/', event: [{ name: 'testSocketAck', status: true }]},\n    // { id: 0, url: 'http://10.10.30.110:8086', event: [{ name: 'ajitres', status: true }] },\n    //{ id: 1, url: 'http://10.10.30.110:9000/', event: [{ name: 'startRoomAck', status: true },{ name: 'broadcast', status: true },] },    \n]\n\nclass Dashboard extends Component {\n    state = { DataVal: data, active: '' };\n\n    componentDidMount() {\n      \n      if( this.state.DataVal.lenght > 0)\n      { this.setState({ active: this.state.DataVal[0].id}) }\n      else\n      { this.addNewTab() }\n\n    }\n\n    // remove Tab \n    removeTab = (item) => {\n        let data = this.state.DataVal;                \n        let index = data.findIndex(val => val.id === item.id)\n        data.splice(index, 1)\n        this.setState({ DataVal: data })        \n        if (data.findIndex(val => val.id === this.state.active) === -1) {\n            let activeItem = data.length > 1 ? data[index - 1].id : data[0].id;\n            setTimeout(() => this.activeTab(activeItem), 100);\n        }\n        else {\n            let currentTab = data[data.findIndex(val => val.id === this.state.active)].id;\n            setTimeout(() => this.activeTab(currentTab), 100);\n        }\n    }\n\n    // Add new Tab\n    addNewTab = () => {\n        let data = this.state.DataVal;\n        let id = Math.random();\n        data.push({ url: '', event: [], id: id })\n        this.setState({ DataVal: data, active: id })\n    }\n\n    // Update data\n    updateData = (item) => {\n        // console.log(item);\n        let data = this.state.DataVal;\n        let index = data.findIndex(val => val.id === item.id)\n        data[index].url = item.url;\n        this.setState({ DataVal: data })\n    }\n\n    // Active tab\n    activeTab=(id)=> this.setState({ active: id })\n\n    render() {\n        const { DataVal, active } = this.state;\n        return (\n            <div className=\"container-fluid pt-2 pb-2\">\n                <div className=\"card border-0\">\n                    <div className=\"card-header p-0 shadow-none bg-light\">\n                        <div className=\"tabboxs d-flex flex-row justify-content-start align-items-stretch\">\n                            <ul className=\"tabs d-flex flex-nowrap m-0 p-0\">\n                                {DataVal.map((item, index) => <li onClick={() => this.activeTab(item.id)} className={(active === item.id ? 'active' : '') + \" d-flex\"} key={item.id} title={item.url || 'Socket Url'}>\n                                    <span>{item.url || 'Socket Url'}</span>\n                                    {DataVal.length > 1 ? <i className=\"material-icons\" onClick={() => this.removeTab(item)}>clear</i>:''}\n                                </li>)}\n                            </ul>\n                            <div className=\"addtabs\">\n                                <i className=\"bg-silver text-white material-icons\" onClick={this.addNewTab}>add</i>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"card-body px-0 py-3\">\n                        {DataVal.map((item, index) =>\n                            <SocketTabItem data={item} show={active} update={this.updateData} key={item.id} className=\"customshow\" socketName={'socket'+item.id}/>\n                        )}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        global: state.Global,\n    };\n}\nexport default connect(mapStateToProps)(Dashboard);"],"sourceRoot":""}